{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FeeMarketEIP1559Transaction = void 0;\nconst rlp_1 = require(\"@ethereumjs/rlp\");\nconst util_1 = require(\"@ethereumjs/util\");\nconst keccak_1 = require(\"ethereum-cryptography/keccak\");\nconst baseTransaction_1 = require(\"./baseTransaction\");\nconst util_2 = require(\"./util\");\nconst TRANSACTION_TYPE = 2;\nconst TRANSACTION_TYPE_BUFFER = Buffer.from(TRANSACTION_TYPE.toString(16).padStart(2, '0'), 'hex');\n/**\n * Typed transaction with a new gas fee market mechanism\n *\n * - TransactionType: 2\n * - EIP: [EIP-1559](https://eips.ethereum.org/EIPS/eip-1559)\n */\nclass FeeMarketEIP1559Transaction extends baseTransaction_1.BaseTransaction {\n  /**\n   * This constructor takes the values, validates them, assigns them and freezes the object.\n   *\n   * It is not recommended to use this constructor directly. Instead use\n   * the static factory methods to assist in creating a Transaction object from\n   * varying data types.\n   */\n  constructor(txData, opts = {}) {\n    super({\n      ...txData,\n      type: TRANSACTION_TYPE\n    }, opts);\n    /**\n     * The default HF if the tx type is active on that HF\n     * or the first greater HF where the tx is active.\n     *\n     * @hidden\n     */\n    this.DEFAULT_HARDFORK = 'london';\n    const {\n      chainId,\n      accessList,\n      maxFeePerGas,\n      maxPriorityFeePerGas\n    } = txData;\n    this.common = this._getCommon(opts.common, chainId);\n    this.chainId = this.common.chainId();\n    if (this.common.isActivatedEIP(1559) === false) {\n      throw new Error('EIP-1559 not enabled on Common');\n    }\n    this.activeCapabilities = this.activeCapabilities.concat([1559, 2718, 2930]);\n    // Populate the access list fields\n    const accessListData = util_2.AccessLists.getAccessListData(accessList ?? []);\n    this.accessList = accessListData.accessList;\n    this.AccessListJSON = accessListData.AccessListJSON;\n    // Verify the access list format.\n    util_2.AccessLists.verifyAccessList(this.accessList);\n    this.maxFeePerGas = (0, util_1.bufferToBigInt)((0, util_1.toBuffer)(maxFeePerGas === '' ? '0x' : maxFeePerGas));\n    this.maxPriorityFeePerGas = (0, util_1.bufferToBigInt)((0, util_1.toBuffer)(maxPriorityFeePerGas === '' ? '0x' : maxPriorityFeePerGas));\n    this._validateCannotExceedMaxInteger({\n      maxFeePerGas: this.maxFeePerGas,\n      maxPriorityFeePerGas: this.maxPriorityFeePerGas\n    });\n    baseTransaction_1.BaseTransaction._validateNotArray(txData);\n    if (this.gasLimit * this.maxFeePerGas > util_1.MAX_INTEGER) {\n      const msg = this._errorMsg('gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)');\n      throw new Error(msg);\n    }\n    if (this.maxFeePerGas < this.maxPriorityFeePerGas) {\n      const msg = this._errorMsg('maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)');\n      throw new Error(msg);\n    }\n    this._validateYParity();\n    this._validateHighS();\n    const freeze = opts?.freeze ?? true;\n    if (freeze) {\n      Object.freeze(this);\n    }\n  }\n  /**\n   * Instantiate a transaction from a data dictionary.\n   *\n   * Format: { chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n   * accessList, v, r, s }\n   *\n   * Notes:\n   * - `chainId` will be set automatically if not provided\n   * - All parameters are optional and have some basic default values\n   */\n  static fromTxData(txData, opts = {}) {\n    return new FeeMarketEIP1559Transaction(txData, opts);\n  }\n  /**\n   * Instantiate a transaction from the serialized tx.\n   *\n   * Format: `0x02 || rlp([chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n   * accessList, signatureYParity, signatureR, signatureS])`\n   */\n  static fromSerializedTx(serialized, opts = {}) {\n    if (!serialized.slice(0, 1).equals(TRANSACTION_TYPE_BUFFER)) {\n      throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${TRANSACTION_TYPE}, received: ${serialized.slice(0, 1).toString('hex')}`);\n    }\n    const values = (0, util_1.arrToBufArr)(rlp_1.RLP.decode(serialized.slice(1)));\n    if (!Array.isArray(values)) {\n      throw new Error('Invalid serialized tx input: must be array');\n    }\n    return FeeMarketEIP1559Transaction.fromValuesArray(values, opts);\n  }\n  /**\n   * Create a transaction from a values array.\n   *\n   * Format: `[chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n   * accessList, signatureYParity, signatureR, signatureS]`\n   */\n  static fromValuesArray(values, opts = {}) {\n    if (values.length !== 9 && values.length !== 12) {\n      throw new Error('Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).');\n    }\n    const [chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data, accessList, v, r, s] = values;\n    this._validateNotArray({\n      chainId,\n      v\n    });\n    (0, util_1.validateNoLeadingZeroes)({\n      nonce,\n      maxPriorityFeePerGas,\n      maxFeePerGas,\n      gasLimit,\n      value,\n      v,\n      r,\n      s\n    });\n    return new FeeMarketEIP1559Transaction({\n      chainId: (0, util_1.bufferToBigInt)(chainId),\n      nonce,\n      maxPriorityFeePerGas,\n      maxFeePerGas,\n      gasLimit,\n      to,\n      value,\n      data,\n      accessList: accessList ?? [],\n      v: v !== undefined ? (0, util_1.bufferToBigInt)(v) : undefined,\n      r,\n      s\n    }, opts);\n  }\n  /**\n   * The amount of gas paid for the data in this tx\n   */\n  getDataFee() {\n    if (this.cache.dataFee && this.cache.dataFee.hardfork === this.common.hardfork()) {\n      return this.cache.dataFee.value;\n    }\n    let cost = super.getDataFee();\n    cost += BigInt(util_2.AccessLists.getDataFeeEIP2930(this.accessList, this.common));\n    if (Object.isFrozen(this)) {\n      this.cache.dataFee = {\n        value: cost,\n        hardfork: this.common.hardfork()\n      };\n    }\n    return cost;\n  }\n  /**\n   * The up front amount that an account must have for this transaction to be valid\n   * @param baseFee The base fee of the block (will be set to 0 if not provided)\n   */\n  getUpfrontCost(baseFee = BigInt(0)) {\n    const prio = this.maxPriorityFeePerGas;\n    const maxBase = this.maxFeePerGas - baseFee;\n    const inclusionFeePerGas = prio < maxBase ? prio : maxBase;\n    const gasPrice = inclusionFeePerGas + baseFee;\n    return this.gasLimit * gasPrice + this.value;\n  }\n  /**\n   * Returns a Buffer Array of the raw Buffers of the EIP-1559 transaction, in order.\n   *\n   * Format: `[chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n   * accessList, signatureYParity, signatureR, signatureS]`\n   *\n   * Use {@link FeeMarketEIP1559Transaction.serialize} to add a transaction to a block\n   * with {@link Block.fromValuesArray}.\n   *\n   * For an unsigned tx this method uses the empty Buffer values for the\n   * signature parameters `v`, `r` and `s` for encoding. For an EIP-155 compliant\n   * representation for external signing use {@link FeeMarketEIP1559Transaction.getMessageToSign}.\n   */\n  raw() {\n    return [(0, util_1.bigIntToUnpaddedBuffer)(this.chainId), (0, util_1.bigIntToUnpaddedBuffer)(this.nonce), (0, util_1.bigIntToUnpaddedBuffer)(this.maxPriorityFeePerGas), (0, util_1.bigIntToUnpaddedBuffer)(this.maxFeePerGas), (0, util_1.bigIntToUnpaddedBuffer)(this.gasLimit), this.to !== undefined ? this.to.buf : Buffer.from([]), (0, util_1.bigIntToUnpaddedBuffer)(this.value), this.data, this.accessList, this.v !== undefined ? (0, util_1.bigIntToUnpaddedBuffer)(this.v) : Buffer.from([]), this.r !== undefined ? (0, util_1.bigIntToUnpaddedBuffer)(this.r) : Buffer.from([]), this.s !== undefined ? (0, util_1.bigIntToUnpaddedBuffer)(this.s) : Buffer.from([])];\n  }\n  /**\n   * Returns the serialized encoding of the EIP-1559 transaction.\n   *\n   * Format: `0x02 || rlp([chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n   * accessList, signatureYParity, signatureR, signatureS])`\n   *\n   * Note that in contrast to the legacy tx serialization format this is not\n   * valid RLP any more due to the raw tx type preceding and concatenated to\n   * the RLP encoding of the values.\n   */\n  serialize() {\n    const base = this.raw();\n    return Buffer.concat([TRANSACTION_TYPE_BUFFER, Buffer.from(rlp_1.RLP.encode((0, util_1.bufArrToArr)(base)))]);\n  }\n  /**\n   * Returns the serialized unsigned tx (hashed or raw), which can be used\n   * to sign the transaction (e.g. for sending to a hardware wallet).\n   *\n   * Note: in contrast to the legacy tx the raw message format is already\n   * serialized and doesn't need to be RLP encoded any more.\n   *\n   * ```javascript\n   * const serializedMessage = tx.getMessageToSign(false) // use this for the HW wallet input\n   * ```\n   *\n   * @param hashMessage - Return hashed message if set to true (default: true)\n   */\n  getMessageToSign(hashMessage = true) {\n    const base = this.raw().slice(0, 9);\n    const message = Buffer.concat([TRANSACTION_TYPE_BUFFER, Buffer.from(rlp_1.RLP.encode((0, util_1.bufArrToArr)(base)))]);\n    if (hashMessage) {\n      return Buffer.from((0, keccak_1.keccak256)(message));\n    } else {\n      return message;\n    }\n  }\n  /**\n   * Computes a sha3-256 hash of the serialized tx.\n   *\n   * This method can only be used for signed txs (it throws otherwise).\n   * Use {@link FeeMarketEIP1559Transaction.getMessageToSign} to get a tx hash for the purpose of signing.\n   */\n  hash() {\n    if (!this.isSigned()) {\n      const msg = this._errorMsg('Cannot call hash method if transaction is not signed');\n      throw new Error(msg);\n    }\n    if (Object.isFrozen(this)) {\n      if (!this.cache.hash) {\n        this.cache.hash = Buffer.from((0, keccak_1.keccak256)(this.serialize()));\n      }\n      return this.cache.hash;\n    }\n    return Buffer.from((0, keccak_1.keccak256)(this.serialize()));\n  }\n  /**\n   * Computes a sha3-256 hash which can be used to verify the signature\n   */\n  getMessageToVerifySignature() {\n    return this.getMessageToSign();\n  }\n  /**\n   * Returns the public key of the sender\n   */\n  getSenderPublicKey() {\n    if (!this.isSigned()) {\n      const msg = this._errorMsg('Cannot call this method if transaction is not signed');\n      throw new Error(msg);\n    }\n    const msgHash = this.getMessageToVerifySignature();\n    const {\n      v,\n      r,\n      s\n    } = this;\n    this._validateHighS();\n    try {\n      return (0, util_1.ecrecover)(msgHash, v + BigInt(27),\n      // Recover the 27 which was stripped from ecsign\n      (0, util_1.bigIntToUnpaddedBuffer)(r), (0, util_1.bigIntToUnpaddedBuffer)(s));\n    } catch (e) {\n      const msg = this._errorMsg('Invalid Signature');\n      throw new Error(msg);\n    }\n  }\n  _processSignature(v, r, s) {\n    const opts = {\n      ...this.txOptions,\n      common: this.common\n    };\n    return FeeMarketEIP1559Transaction.fromTxData({\n      chainId: this.chainId,\n      nonce: this.nonce,\n      maxPriorityFeePerGas: this.maxPriorityFeePerGas,\n      maxFeePerGas: this.maxFeePerGas,\n      gasLimit: this.gasLimit,\n      to: this.to,\n      value: this.value,\n      data: this.data,\n      accessList: this.accessList,\n      v: v - BigInt(27),\n      r: (0, util_1.bufferToBigInt)(r),\n      s: (0, util_1.bufferToBigInt)(s)\n    }, opts);\n  }\n  /**\n   * Returns an object with the JSON representation of the transaction\n   */\n  toJSON() {\n    const accessListJSON = util_2.AccessLists.getAccessListJSON(this.accessList);\n    return {\n      chainId: (0, util_1.bigIntToHex)(this.chainId),\n      nonce: (0, util_1.bigIntToHex)(this.nonce),\n      maxPriorityFeePerGas: (0, util_1.bigIntToHex)(this.maxPriorityFeePerGas),\n      maxFeePerGas: (0, util_1.bigIntToHex)(this.maxFeePerGas),\n      gasLimit: (0, util_1.bigIntToHex)(this.gasLimit),\n      to: this.to !== undefined ? this.to.toString() : undefined,\n      value: (0, util_1.bigIntToHex)(this.value),\n      data: '0x' + this.data.toString('hex'),\n      accessList: accessListJSON,\n      v: this.v !== undefined ? (0, util_1.bigIntToHex)(this.v) : undefined,\n      r: this.r !== undefined ? (0, util_1.bigIntToHex)(this.r) : undefined,\n      s: this.s !== undefined ? (0, util_1.bigIntToHex)(this.s) : undefined\n    };\n  }\n  /**\n   * Return a compact error string representation of the object\n   */\n  errorStr() {\n    let errorStr = this._getSharedErrorPostfix();\n    errorStr += ` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`;\n    return errorStr;\n  }\n  /**\n   * Internal helper function to create an annotated error message\n   *\n   * @param msg Base error message\n   * @hidden\n   */\n  _errorMsg(msg) {\n    return `${msg} (${this.errorStr()})`;\n  }\n}\nexports.FeeMarketEIP1559Transaction = FeeMarketEIP1559Transaction;","map":{"version":3,"names":["rlp_1","require","util_1","keccak_1","baseTransaction_1","util_2","TRANSACTION_TYPE","TRANSACTION_TYPE_BUFFER","Buffer","from","toString","padStart","FeeMarketEIP1559Transaction","BaseTransaction","constructor","txData","opts","type","DEFAULT_HARDFORK","chainId","accessList","maxFeePerGas","maxPriorityFeePerGas","common","_getCommon","isActivatedEIP","Error","activeCapabilities","concat","accessListData","AccessLists","getAccessListData","AccessListJSON","verifyAccessList","bufferToBigInt","toBuffer","_validateCannotExceedMaxInteger","_validateNotArray","gasLimit","MAX_INTEGER","msg","_errorMsg","_validateYParity","_validateHighS","freeze","Object","fromTxData","fromSerializedTx","serialized","slice","equals","values","arrToBufArr","RLP","decode","Array","isArray","fromValuesArray","length","nonce","to","value","data","v","r","s","validateNoLeadingZeroes","undefined","getDataFee","cache","dataFee","hardfork","cost","BigInt","getDataFeeEIP2930","isFrozen","getUpfrontCost","baseFee","prio","maxBase","inclusionFeePerGas","gasPrice","raw","bigIntToUnpaddedBuffer","buf","serialize","base","encode","bufArrToArr","getMessageToSign","hashMessage","message","keccak256","hash","isSigned","getMessageToVerifySignature","getSenderPublicKey","msgHash","ecrecover","e","_processSignature","txOptions","toJSON","accessListJSON","getAccessListJSON","bigIntToHex","errorStr","_getSharedErrorPostfix","exports"],"sources":["/Users/Einpunk Community/Documents/Brownie/brownie_gamex_vault/node_modules/@ethereumjs/tx/src/eip1559Transaction.ts"],"sourcesContent":["import { RLP } from '@ethereumjs/rlp'\nimport {\n  MAX_INTEGER,\n  arrToBufArr,\n  bigIntToHex,\n  bigIntToUnpaddedBuffer,\n  bufArrToArr,\n  bufferToBigInt,\n  ecrecover,\n  toBuffer,\n  validateNoLeadingZeroes,\n} from '@ethereumjs/util'\nimport { keccak256 } from 'ethereum-cryptography/keccak'\n\nimport { BaseTransaction } from './baseTransaction'\nimport { AccessLists } from './util'\n\nimport type {\n  AccessList,\n  AccessListBuffer,\n  FeeMarketEIP1559TxData,\n  FeeMarketEIP1559ValuesArray,\n  JsonTx,\n  TxOptions,\n} from './types'\nimport type { Common } from '@ethereumjs/common'\n\nconst TRANSACTION_TYPE = 2\nconst TRANSACTION_TYPE_BUFFER = Buffer.from(TRANSACTION_TYPE.toString(16).padStart(2, '0'), 'hex')\n\n/**\n * Typed transaction with a new gas fee market mechanism\n *\n * - TransactionType: 2\n * - EIP: [EIP-1559](https://eips.ethereum.org/EIPS/eip-1559)\n */\nexport class FeeMarketEIP1559Transaction extends BaseTransaction<FeeMarketEIP1559Transaction> {\n  public readonly chainId: bigint\n  public readonly accessList: AccessListBuffer\n  public readonly AccessListJSON: AccessList\n  public readonly maxPriorityFeePerGas: bigint\n  public readonly maxFeePerGas: bigint\n\n  public readonly common: Common\n\n  /**\n   * The default HF if the tx type is active on that HF\n   * or the first greater HF where the tx is active.\n   *\n   * @hidden\n   */\n  protected DEFAULT_HARDFORK = 'london'\n\n  /**\n   * Instantiate a transaction from a data dictionary.\n   *\n   * Format: { chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n   * accessList, v, r, s }\n   *\n   * Notes:\n   * - `chainId` will be set automatically if not provided\n   * - All parameters are optional and have some basic default values\n   */\n  public static fromTxData(txData: FeeMarketEIP1559TxData, opts: TxOptions = {}) {\n    return new FeeMarketEIP1559Transaction(txData, opts)\n  }\n\n  /**\n   * Instantiate a transaction from the serialized tx.\n   *\n   * Format: `0x02 || rlp([chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n   * accessList, signatureYParity, signatureR, signatureS])`\n   */\n  public static fromSerializedTx(serialized: Buffer, opts: TxOptions = {}) {\n    if (!serialized.slice(0, 1).equals(TRANSACTION_TYPE_BUFFER)) {\n      throw new Error(\n        `Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ${TRANSACTION_TYPE}, received: ${serialized\n          .slice(0, 1)\n          .toString('hex')}`\n      )\n    }\n\n    const values = arrToBufArr(RLP.decode(serialized.slice(1)))\n\n    if (!Array.isArray(values)) {\n      throw new Error('Invalid serialized tx input: must be array')\n    }\n\n    return FeeMarketEIP1559Transaction.fromValuesArray(values as any, opts)\n  }\n\n  /**\n   * Create a transaction from a values array.\n   *\n   * Format: `[chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n   * accessList, signatureYParity, signatureR, signatureS]`\n   */\n  public static fromValuesArray(values: FeeMarketEIP1559ValuesArray, opts: TxOptions = {}) {\n    if (values.length !== 9 && values.length !== 12) {\n      throw new Error(\n        'Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).'\n      )\n    }\n\n    const [\n      chainId,\n      nonce,\n      maxPriorityFeePerGas,\n      maxFeePerGas,\n      gasLimit,\n      to,\n      value,\n      data,\n      accessList,\n      v,\n      r,\n      s,\n    ] = values\n\n    this._validateNotArray({ chainId, v })\n    validateNoLeadingZeroes({ nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, value, v, r, s })\n\n    return new FeeMarketEIP1559Transaction(\n      {\n        chainId: bufferToBigInt(chainId),\n        nonce,\n        maxPriorityFeePerGas,\n        maxFeePerGas,\n        gasLimit,\n        to,\n        value,\n        data,\n        accessList: accessList ?? [],\n        v: v !== undefined ? bufferToBigInt(v) : undefined, // EIP2930 supports v's with value 0 (empty Buffer)\n        r,\n        s,\n      },\n      opts\n    )\n  }\n\n  /**\n   * This constructor takes the values, validates them, assigns them and freezes the object.\n   *\n   * It is not recommended to use this constructor directly. Instead use\n   * the static factory methods to assist in creating a Transaction object from\n   * varying data types.\n   */\n  public constructor(txData: FeeMarketEIP1559TxData, opts: TxOptions = {}) {\n    super({ ...txData, type: TRANSACTION_TYPE }, opts)\n    const { chainId, accessList, maxFeePerGas, maxPriorityFeePerGas } = txData\n\n    this.common = this._getCommon(opts.common, chainId)\n    this.chainId = this.common.chainId()\n\n    if (this.common.isActivatedEIP(1559) === false) {\n      throw new Error('EIP-1559 not enabled on Common')\n    }\n    this.activeCapabilities = this.activeCapabilities.concat([1559, 2718, 2930])\n\n    // Populate the access list fields\n    const accessListData = AccessLists.getAccessListData(accessList ?? [])\n    this.accessList = accessListData.accessList\n    this.AccessListJSON = accessListData.AccessListJSON\n    // Verify the access list format.\n    AccessLists.verifyAccessList(this.accessList)\n\n    this.maxFeePerGas = bufferToBigInt(toBuffer(maxFeePerGas === '' ? '0x' : maxFeePerGas))\n    this.maxPriorityFeePerGas = bufferToBigInt(\n      toBuffer(maxPriorityFeePerGas === '' ? '0x' : maxPriorityFeePerGas)\n    )\n\n    this._validateCannotExceedMaxInteger({\n      maxFeePerGas: this.maxFeePerGas,\n      maxPriorityFeePerGas: this.maxPriorityFeePerGas,\n    })\n\n    BaseTransaction._validateNotArray(txData)\n\n    if (this.gasLimit * this.maxFeePerGas > MAX_INTEGER) {\n      const msg = this._errorMsg('gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)')\n      throw new Error(msg)\n    }\n\n    if (this.maxFeePerGas < this.maxPriorityFeePerGas) {\n      const msg = this._errorMsg(\n        'maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)'\n      )\n      throw new Error(msg)\n    }\n\n    this._validateYParity()\n    this._validateHighS()\n\n    const freeze = opts?.freeze ?? true\n    if (freeze) {\n      Object.freeze(this)\n    }\n  }\n\n  /**\n   * The amount of gas paid for the data in this tx\n   */\n  getDataFee(): bigint {\n    if (this.cache.dataFee && this.cache.dataFee.hardfork === this.common.hardfork()) {\n      return this.cache.dataFee.value\n    }\n\n    let cost = super.getDataFee()\n    cost += BigInt(AccessLists.getDataFeeEIP2930(this.accessList, this.common))\n\n    if (Object.isFrozen(this)) {\n      this.cache.dataFee = {\n        value: cost,\n        hardfork: this.common.hardfork(),\n      }\n    }\n\n    return cost\n  }\n\n  /**\n   * The up front amount that an account must have for this transaction to be valid\n   * @param baseFee The base fee of the block (will be set to 0 if not provided)\n   */\n  getUpfrontCost(baseFee: bigint = BigInt(0)): bigint {\n    const prio = this.maxPriorityFeePerGas\n    const maxBase = this.maxFeePerGas - baseFee\n    const inclusionFeePerGas = prio < maxBase ? prio : maxBase\n    const gasPrice = inclusionFeePerGas + baseFee\n    return this.gasLimit * gasPrice + this.value\n  }\n\n  /**\n   * Returns a Buffer Array of the raw Buffers of the EIP-1559 transaction, in order.\n   *\n   * Format: `[chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n   * accessList, signatureYParity, signatureR, signatureS]`\n   *\n   * Use {@link FeeMarketEIP1559Transaction.serialize} to add a transaction to a block\n   * with {@link Block.fromValuesArray}.\n   *\n   * For an unsigned tx this method uses the empty Buffer values for the\n   * signature parameters `v`, `r` and `s` for encoding. For an EIP-155 compliant\n   * representation for external signing use {@link FeeMarketEIP1559Transaction.getMessageToSign}.\n   */\n  raw(): FeeMarketEIP1559ValuesArray {\n    return [\n      bigIntToUnpaddedBuffer(this.chainId),\n      bigIntToUnpaddedBuffer(this.nonce),\n      bigIntToUnpaddedBuffer(this.maxPriorityFeePerGas),\n      bigIntToUnpaddedBuffer(this.maxFeePerGas),\n      bigIntToUnpaddedBuffer(this.gasLimit),\n      this.to !== undefined ? this.to.buf : Buffer.from([]),\n      bigIntToUnpaddedBuffer(this.value),\n      this.data,\n      this.accessList,\n      this.v !== undefined ? bigIntToUnpaddedBuffer(this.v) : Buffer.from([]),\n      this.r !== undefined ? bigIntToUnpaddedBuffer(this.r) : Buffer.from([]),\n      this.s !== undefined ? bigIntToUnpaddedBuffer(this.s) : Buffer.from([]),\n    ]\n  }\n\n  /**\n   * Returns the serialized encoding of the EIP-1559 transaction.\n   *\n   * Format: `0x02 || rlp([chainId, nonce, maxPriorityFeePerGas, maxFeePerGas, gasLimit, to, value, data,\n   * accessList, signatureYParity, signatureR, signatureS])`\n   *\n   * Note that in contrast to the legacy tx serialization format this is not\n   * valid RLP any more due to the raw tx type preceding and concatenated to\n   * the RLP encoding of the values.\n   */\n  serialize(): Buffer {\n    const base = this.raw()\n    return Buffer.concat([\n      TRANSACTION_TYPE_BUFFER,\n      Buffer.from(RLP.encode(bufArrToArr(base as Buffer[]))),\n    ])\n  }\n\n  /**\n   * Returns the serialized unsigned tx (hashed or raw), which can be used\n   * to sign the transaction (e.g. for sending to a hardware wallet).\n   *\n   * Note: in contrast to the legacy tx the raw message format is already\n   * serialized and doesn't need to be RLP encoded any more.\n   *\n   * ```javascript\n   * const serializedMessage = tx.getMessageToSign(false) // use this for the HW wallet input\n   * ```\n   *\n   * @param hashMessage - Return hashed message if set to true (default: true)\n   */\n  getMessageToSign(hashMessage = true): Buffer {\n    const base = this.raw().slice(0, 9)\n    const message = Buffer.concat([\n      TRANSACTION_TYPE_BUFFER,\n      Buffer.from(RLP.encode(bufArrToArr(base as Buffer[]))),\n    ])\n    if (hashMessage) {\n      return Buffer.from(keccak256(message))\n    } else {\n      return message\n    }\n  }\n\n  /**\n   * Computes a sha3-256 hash of the serialized tx.\n   *\n   * This method can only be used for signed txs (it throws otherwise).\n   * Use {@link FeeMarketEIP1559Transaction.getMessageToSign} to get a tx hash for the purpose of signing.\n   */\n  public hash(): Buffer {\n    if (!this.isSigned()) {\n      const msg = this._errorMsg('Cannot call hash method if transaction is not signed')\n      throw new Error(msg)\n    }\n\n    if (Object.isFrozen(this)) {\n      if (!this.cache.hash) {\n        this.cache.hash = Buffer.from(keccak256(this.serialize()))\n      }\n      return this.cache.hash\n    }\n\n    return Buffer.from(keccak256(this.serialize()))\n  }\n\n  /**\n   * Computes a sha3-256 hash which can be used to verify the signature\n   */\n  public getMessageToVerifySignature(): Buffer {\n    return this.getMessageToSign()\n  }\n\n  /**\n   * Returns the public key of the sender\n   */\n  public getSenderPublicKey(): Buffer {\n    if (!this.isSigned()) {\n      const msg = this._errorMsg('Cannot call this method if transaction is not signed')\n      throw new Error(msg)\n    }\n\n    const msgHash = this.getMessageToVerifySignature()\n    const { v, r, s } = this\n\n    this._validateHighS()\n\n    try {\n      return ecrecover(\n        msgHash,\n        v! + BigInt(27), // Recover the 27 which was stripped from ecsign\n        bigIntToUnpaddedBuffer(r!),\n        bigIntToUnpaddedBuffer(s!)\n      )\n    } catch (e: any) {\n      const msg = this._errorMsg('Invalid Signature')\n      throw new Error(msg)\n    }\n  }\n\n  _processSignature(v: bigint, r: Buffer, s: Buffer) {\n    const opts = { ...this.txOptions, common: this.common }\n\n    return FeeMarketEIP1559Transaction.fromTxData(\n      {\n        chainId: this.chainId,\n        nonce: this.nonce,\n        maxPriorityFeePerGas: this.maxPriorityFeePerGas,\n        maxFeePerGas: this.maxFeePerGas,\n        gasLimit: this.gasLimit,\n        to: this.to,\n        value: this.value,\n        data: this.data,\n        accessList: this.accessList,\n        v: v - BigInt(27), // This looks extremely hacky: @ethereumjs/util actually adds 27 to the value, the recovery bit is either 0 or 1.\n        r: bufferToBigInt(r),\n        s: bufferToBigInt(s),\n      },\n      opts\n    )\n  }\n\n  /**\n   * Returns an object with the JSON representation of the transaction\n   */\n  toJSON(): JsonTx {\n    const accessListJSON = AccessLists.getAccessListJSON(this.accessList)\n\n    return {\n      chainId: bigIntToHex(this.chainId),\n      nonce: bigIntToHex(this.nonce),\n      maxPriorityFeePerGas: bigIntToHex(this.maxPriorityFeePerGas),\n      maxFeePerGas: bigIntToHex(this.maxFeePerGas),\n      gasLimit: bigIntToHex(this.gasLimit),\n      to: this.to !== undefined ? this.to.toString() : undefined,\n      value: bigIntToHex(this.value),\n      data: '0x' + this.data.toString('hex'),\n      accessList: accessListJSON,\n      v: this.v !== undefined ? bigIntToHex(this.v) : undefined,\n      r: this.r !== undefined ? bigIntToHex(this.r) : undefined,\n      s: this.s !== undefined ? bigIntToHex(this.s) : undefined,\n    }\n  }\n\n  /**\n   * Return a compact error string representation of the object\n   */\n  public errorStr() {\n    let errorStr = this._getSharedErrorPostfix()\n    errorStr += ` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`\n    return errorStr\n  }\n\n  /**\n   * Internal helper function to create an annotated error message\n   *\n   * @param msg Base error message\n   * @hidden\n   */\n  protected _errorMsg(msg: string) {\n    return `${msg} (${this.errorStr()})`\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}